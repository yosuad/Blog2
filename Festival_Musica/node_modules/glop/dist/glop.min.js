(function(a){"use strict";function b(){return c({})}function c(a){var b={};return a.on=e.bind(null,b,a,!1),a.one=e.bind(null,b,a,!0),a.only=f.bind(null,b,a,!1),a.onely=f.bind(null,b,a,!0),a.off=i.bind(null,b,a),a.emit=h.bind(null,b,a),a.emitter=g.bind(null,b,a),a.setup=d.bind(null,b,a),a.setLogger=k.bind(null,b,a),a.log=function(){},a.clear=j.bind(null,b,a),a}function d(a,b,c){return b.log("Setup: Clearing all event names and handlers"),Object.keys(a).forEach(function(b){delete a[b]}),c.forEach(function(b){a[b]=[]}),b.log("Setup: event names set",c),b}function e(a,b,c,d,f){return"object"==typeof d?(b.log("On"+(c?"e":"")+": setting multiple handlers",d,f),d.forEach(function(d){e(a,b,c,d,f)})):"object"==typeof a[d]?(b.log("On"+(c?"e":"")+": setting handler for "+d,f),a[d].unshift({fn:f,one:c})):b.log("ERROR: On: invalid event name: "+d),b}function f(a,b,c,d,g){if("object"==typeof d)b.log("On"+(c?"e":"")+"ly: setting multiple handlers",d,g),d.forEach(function(d){f(a,b,c,d,g)});else{if("object"==typeof a[d])return b.log("On"+(c?"e":"")+"ly: clearing handlers for "+d),i(a,b,d),b.log("On"+(c?"e":"")+"ly: setting handler for "+d+' through "on"'),e(a,b,c,d,g);b.log("ERROR: On"+(c?"e":"")+"ly: invalid event name: "+d)}return b}function g(a,b,c){return b.log("Emitter: generating emitter for "+c),"object"==typeof a[c]?h.bind(null,a,b,c):void 0}function h(a,b,c){if("object"==typeof c)b.log("Emit: Emitting multiple event names",c),c.forEach(function(c){var d=Array.prototype.slice.call(arguments).slice(3);h.apply(null,[a,b,c].concat[d])});else if("object"==typeof a[c]){var d=Array.prototype.slice.call(arguments).slice(3),e=a[c].length;for(b.log.apply(null,["Emit: emitting "+c].concat(d));e--;)b.log("Emit: Handler found for "+c,a[c][e].fn),a[c][e].fn.apply(null,d),a[c][e].one&&(b.log("Emit: Removing single fire handler for "+c,a[c][e].fn),a[c].splice(e,1))}else b.log("ERROR: Emit: invalid event name: "+c);return b}function i(a,b,c,d){if("object"==typeof c)b.log("Off: de-registering multiple event handlers",c,d),c.forEach(function(c){i(a,b,c,d)});else if("object"==typeof a[c]){if(a[c]&&!d)b.log("Off: de-registering all event handlers for "+c),a[c]=[];else if(a[c]){b.log("Off: looking for specific event handler for "+c,d);for(var e=a[c].length;e--;)a[c][e].fn===d&&(b.log("Off: de-registering specific event handler for "+c,d),a[c].splice(e,1))}}else b.log("ERROR: Off: invalid event name: "+c);return b}function j(a,b){return Object.keys(a).forEach(function(b){a[b]=[]}),b.log("Clear: all handlers cleared"),b}function k(a,b,c){"function"==typeof c&&(b.log=c,b.log("Glop log initialized!"))}c(b),"object"==typeof module?module.exports=b:a.Glop=b}).call(null,this);